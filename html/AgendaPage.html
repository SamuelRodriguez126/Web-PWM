<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Agenda</title>
    <link rel="stylesheet" href="../css/agendaStyle.css" type="text/css">
    <link rel="stylesheet" href="../css/generalStyle.css" type="text/css">
</head>
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script>
    $(function(){
        $("#header").load("Header.html",);
        $("#footer").load("Footer.html");
    });
</script>
<div id="header"></div>
<body>
<h2>Agenda</h2>
<div class="eventos">
    <ul class=listaEventos style="display: block">
    </ul>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<script>
    $(document).ready(function (){
        function getJsonEvents(){
            $.getJSON("../json/agenda.json", function (json){
                $.each(json.events, function (i){
                    var event = "<li class='eventoLista'>" +
                        "           <div class=\"evento\" id=evento" + i + ">" +
                        "               <img class=\"imagenCalendario\" src=\"images/calendario.png\" alt=\"imagen calendario\">" +
                        "               <div class=\"infoEvento\">\n" +
                        "                  <p class=\"nombreEvento\">" + this.name + "</p>" +
                        "                  <p class=\"textoEvento\">" + this.day + "</p>" +
                        "                  <p class=\"textoEvento\">" + this.place + "</p>" +
                        "                  <p class=\"textoEvento\">" + this.municipality +
                        "               </div>" +
                        "               <button type=\"button\" class=\"btn\" data-toggle=\"dropdown\" id=" + i + ">" +
                        "                   <img src=\"images/FlechaAbajo.png\" class=\"flechaAbajoEvento\" alt=\"InformaciÃ³n Evento\">" +
                        "               </button>" +
                        "               <ul class='apartadoDescripcionEvento' id=apartadoevento" + i + ">" +
                        "                   <li class='paginaEvento'> " +
                        "                       <img src=" + this.descriptionImage + " class='imagenDescripcion' alt='Imagen'>" +
                        "                       <p class='textoDescripcionEvento'>" + this.descriptionText + "</p>" +
                        "                   </li>" +
                        "               </ul> " +
                        "           </div>"
                    $(".eventos .listaEventos").append(event);
                });
            })
        }

        getJsonEvents();

        $(".eventos .listaEventos").on("click", ".btn", function (){
            var id=$(this).parents().attr("id");
            var finalId = "#apartado" + id;
            $(finalId).show();
        })

        $(document).mouseup(function (e) {
            if ($(e.target).closest(".apartadoDescripcionEvento").length === 0) {
                $(".apartadoDescripcionEvento").hide();
            }
        });
    });


</script>
</body>
<div id="footer"></div>
</html>